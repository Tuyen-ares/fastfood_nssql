{% extends "base.html" %}

{% block title %}{{ restaurant.name }} - FastFood{% endblock %}

{% block content %}
<div class="container my-5">
    <div class="row mb-4">
        <div class="col-md-8">
            <h2>{{ restaurant.name }}</h2>
            <p class="text-muted">
                <i class="bi bi-geo-alt"></i> {{ restaurant.addr }}
            </p>
            <p>
                <i class="bi bi-star-fill text-warning"></i> {{ restaurant.rating }}
                <span class="ms-3"><i class="bi bi-clock"></i> {{ restaurant.open }} - {{ restaurant.close }}</span>
            </p>
        </div>
    </div>

    <h3 class="mb-4">Menu</h3>
    <div class="row g-3">
        {% for menu in menus %}
        <div class="col-md-4 col-lg-3">
            <div class="card h-100 shadow-sm border-0" style="border-radius: 12px; overflow: hidden; transition: transform 0.3s ease, box-shadow 0.3s ease;">
                <div style="overflow: hidden; height: 160px; min-height: 160px; background-color: #f8f9fa; display: flex; align-items: center; justify-content: center;">
                    <img src="{{ menu.display_image }}" 
                         class="card-img-top" 
                         style="width: 100%; height: 100%; object-fit: cover; transition: transform 0.3s ease; display: block;" 
                         alt="{{ menu.get('name', 'N/A') }}"
                         onmouseover="this.style.transform='scale(1.05)'"
                         onmouseout="this.style.transform='scale(1)'"
                         onerror="this.style.display='none'; this.parentElement.innerHTML='<i class=\'bi bi-image text-muted\' style=\'font-size: 3rem;\'></i>'">
                </div>
                <div class="card-body d-flex flex-column" style="padding: 1rem;">
                    <h6 class="card-title mb-2" style="font-size: 1rem; font-weight: 600; line-height: 1.3;">{{ menu.get('name', 'N/A') }}</h6>
                    <p class="card-text text-muted small mb-2" style="font-size: 0.8rem;">
                        <i class="bi bi-tag"></i> {{ menu.get('cat', 'N/A') }}
                    </p>
                    <div class="mt-auto">
                        <p class="mb-2">
                            <strong class="text-danger" style="font-size: 1.1rem;">{{ "{:,.0f}".format(menu.get('price', 0)) }} đ</strong>
                        </p>
                        <form method="POST" action="{{ url_for('customer.add_to_cart') }}" class="d-inline w-100">
                            <input type="hidden" name="menu_id" value="{{ menu._id }}">
                            <input type="hidden" name="rest_id" value="{{ restaurant._id }}">
                            <input type="hidden" name="quantity" value="1">
                            <button type="submit" class="btn btn-primary btn-sm w-100" style="font-size: 0.85rem;">
                                <i class="bi bi-cart-plus"></i> Thêm vào giỏ
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    {% if not menus %}
        <div class="alert alert-info text-center">
            <i class="bi bi-info-circle"></i> Nhà hàng chưa có menu
        </div>
    {% endif %}
</div>
{% endblock %}

{% block extra_js %}
<script>
// Card hover effect
document.querySelectorAll('.card').forEach(card => {
    card.addEventListener('mouseenter', function() {
        this.style.transform = 'translateY(-5px)';
        this.style.boxShadow = '0 10px 25px rgba(0,0,0,0.15)';
    });
    card.addEventListener('mouseleave', function() {
        this.style.transform = 'translateY(0)';
        this.style.boxShadow = '';
    });
});
</script>
{% endblock %}

